<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cadastro</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/boxicons@latest/css/boxicons.min.css">
    <link rel="stylesheet" href="../css/cadastrar.css">
<link rel="stylesheet" href="../css/cabecalho.css">
    <link rel="stylesheet" href="../css/footer.css">
    <script src="../js/cadastrar.js"></script>
<script src="../js/busca.js"></script>
</head>
<body>
    <header class="main-header">
        <div class="logo">
            <img src="../img/logo.png" alt="logo" class="img_logo_header">
        </div>
        <div class="search-bar">
            <input type="text" id="busca" placeholder="Pesquisar Contato">
            <button type="submit" onclick="buscarContato()">Buscar</button>
        </div>
        <div class="brand-name">
            <h2>Agenda Cyberfox</h2>
        </div>
    </header>
    <div class="sub-header">
        <ul class="sub-menu">
            <li><a href="index.html">Home</a></li>
            <li><a href="cadastrar.html">Adicionar</a></li>
            <li><a href="listar.html">Listar</a></li>
            <li><a href="editar.html">Editar</a></li>
            <li><a href="excluir.html">Excluir</a></li>
        </ul>
    </div>

    <main>
        <section class="about">
            <h2>Cadastro de Contato</h2>
            <form id="formCadastro">
                <label for="nome">Nome:</label><br>
                <input type="text" id="nome" name="nome" required><br><br>
            
                <label for="email">Email:</label><br>
                <input type="email" id="email" name="email" required><br><br>
            
                <label for="idade">Idade:</label><br>
                <input type="number" id="idade" name="idade" required><br><br>
            
                <label for="telefone">Telefone:</label><br>
                <input type="tel" id="telefone" name="telefone" required><br><br>
            
                <p><strong>Data/hora local do cadastro:</strong> <span id="horaCadastro"></span></p>
            
                <button type="submit">Cadastrar</button>
            </form>
            
            <script>
            // Atualiza a hora local no formulário
            function mostrarHoraAtual() {
                const agora = new Date();
                const horaLocal = agora.toLocaleString(); // Formato local: DD/MM/AAAA HH:MM
                document.getElementById('horaCadastro').textContent = horaLocal;
            }
            
            mostrarHoraAtual(); // Mostra a hora quando a página carrega
            
            // Envia o cadastro
            document.getElementById('formCadastro').addEventListener('submit', function(e) {
                e.preventDefault();
            
                const nome = document.getElementById('nome').value;
                const email = document.getElementById('email').value;
                const idade = parseInt(document.getElementById('idade').value);
                const telefone = document.getElementById('telefone').value;
            
                fetch('http://localhost:3000/api/users', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ nome, email, idade, telefone })
                })
                .then(res => res.json())
                .then(data => {
                    alert('Usuário cadastrado com sucesso!');
                    document.getElementById('formCadastro').reset();
                    mostrarHoraAtual(); // Atualiza a hora após novo cadastro
                })
                .catch(error => {
                    console.error('Erro:', error);
                    alert('Erro ao cadastrar usuário.');
                });
            });
            </script>
            
            

        </section>
    </main>

    <footer>
        <p>&copy; 2025 Agenda de Contatos Cyberfox. Todos os direitos reservados.</p>
    </footer>
</body>
</html>
